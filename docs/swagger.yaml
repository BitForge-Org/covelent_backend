openapi: 3.0.3
info:
  title: Service API
  version: 1.0.0
  description: API for service management and retrieval

servers:
  - url: http://localhost:80/api/v1
    description: Local development server
  - url: http://65.0.253.148:80/api/v1
    description: Production server

tags:
  - name: Auth
    description: Authentication management
  - name: Categories
    description: Category management
  - name: Service
    description: Service management and retrieval
  - name: User
    description: User management and retrieval
  - name: ProviderApplication
    description: Provider application management

paths:
  /services:
    $ref: './paths/services.yaml#/~1services'
  /services/featured-services:
    $ref: './paths/featured-services.yaml'
  /services/{serviceId}/image:
    $ref: './paths/service-image-diff.yaml#'

  /categories:
    $ref: './paths/categories.yaml#/~1categories'
  /users/current-user:
    $ref: './paths/users/current-user.yaml#/~1current-user'
  /users/update-account:
    $ref: './paths/users/update-account.yaml#/~1update-account'
  /users/avatar:
    $ref: './paths/users/avatar.yaml#/~1avatar'
  /provider-applications:
    $ref: './paths/provider-application.yaml#/~1provider-applications'

  /provider-applications/{id}:
    $ref: './paths/provider-application.yaml#/~1provider-applications~1{id}'

  /provider-applications/{id}/status:
    $ref: './paths/provider-application.yaml#/~1provider-applications~1{id}~1status'

  /bookings:
    $ref: './paths/booking.yaml#/~1bookings'
  /bookings/available:
    $ref: './paths/booking.yaml#/~1bookings~1available'
  /bookings/history:
    $ref: './paths/booking.yaml#/~1booking~1history'
  /bookings/accepted:
    $ref: './paths/booking.yaml#/~1bookings~1accepted'
  /bookings/reject:
    $ref: './paths/booking.yaml#/~1bookings~1reject'

  /bookings/accept:
    $ref: './paths/booking.yaml#/~1bookings~1accept'

  /addresses:
    $ref: './paths/address.yaml#/~1addresses'
  /addresses/{id}:
    $ref: './paths/address.yaml#/~1addresses~1{id}'

  # Auth endpoints - Fixed references
  /auth/register:
    $ref: './paths/auth.yaml#/~1auth~1register'
  /auth/login:
    $ref: './paths/auth.yaml#/~1auth~1login'
  /auth/logout:
    $ref: './paths/auth.yaml#/~1auth~1logout'
  /auth/login/provider:
    $ref: './paths/auth.yaml#/~1auth~1login~1provider'
  /auth/refresh-token:
    $ref: './paths/auth.yaml#/~1auth~1refresh-token'
  /auth/change-password:
    $ref: './paths/auth.yaml#/~1auth~1change-password'
  /auth/forgot-password:
    $ref: './paths/auth.yaml#/~1auth~1forgot-password'
  /auth/reset-password:
    $ref: './paths/auth.yaml#/~1auth~1reset-password'
  /auth/verify-otp:
    $ref: './paths/auth.yaml#/~1auth~1verify-otp'
  /auth/register/provider:
    $ref: './paths/auth.yaml#/~1auth~1register~1provider'
  /auth/provider/upload-documents:
    $ref: './paths/auth.yaml#/~1auth~1provider~1upload-documents'

  # Webhook endpoints
  /webhook/razorpay:
    $ref: './paths/webhook.yaml#/~1webhook~1razorpay'
  /webhook/verify-payment:
    $ref: './paths/webhook.yaml#/~1webhook~1verify-payment'
  /webhook/payment-status/{bookingId}:
    $ref: './paths/webhook.yaml#/~1webhook~1payment-status~1{bookingId}'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    User:
      $ref: './schemas/User.yaml#/User'
    Service:
      $ref: './schemas/Service.yaml#/Service'
    providerApplication:
      $ref: './schemas/providerApplication.yaml#/ProviderApplication'
    Booking:
      $ref: './schemas/booking.yaml#/Booking'
    Address:
      $ref: './schemas/address.yaml#/Address'
