/bookings/all:
  get:
    summary: Get all bookings (admin/testing)
    description: Retrieve all bookings in the system, with optional status filter. Intended for admin or testing purposes.
    tags:
      - Bookings
    parameters:
      - in: query
        name: status
        schema:
          type: string
        required: false
        description: Filter bookings by status
    responses:
      '200':
        description: List of all bookings
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: object
                  properties:
                    bookings:
                      type: array
                      items:
                        $ref: './../schemas/booking.yaml#/Booking'
                message:
                  type: string
      '500':
        description: Server error
/bookings/{bookingId}:
  get:
    summary: Get booking by ID
    description: Retrieve a single booking by its ObjectId, including populated service, user, provider, and location details.
    tags:
      - Bookings
    security:
      - BearerAuth: []
    parameters:
      - in: path
        name: bookingId
        required: true
        schema:
          type: string
        description: The ObjectId of the booking to retrieve
    responses:
      '200':
        description: Booking retrieved successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  $ref: './../schemas/booking.yaml#/Booking'
                message:
                  type: string
      '400':
        description: Invalid booking ID
      '404':
        description: Booking not found
      '500':
        description: Server error
/bookings/reject:
  post:
    summary: Provider rejects a booking (does not change booking status)
    description: >
      Provider can reject a booking. This does not change the booking status, but records the rejection for this provider. Rejected bookings will not be shown to this provider in getAvailableBookings.
    tags:
      - Bookings
    security:
      - BearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - bookingId
            properties:
              bookingId:
                type: string
                description: The ObjectId of the booking to reject
              reason:
                type: string
                description: Optional reason for rejection
    responses:
      '200':
        description: Booking rejected for this provider (not shown in available bookings)
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
      '400':
        description: Invalid request
      '404':
        description: Booking not found
      '500':
        description: Server error
/bookings/accepted:
  get:
    summary: Get accepted bookings or booking history for provider
    tags:
      - Bookings
    security:
      - BearerAuth: []
    parameters:
      - in: query
        name: status
        schema:
          type: string
        required: false
        description: Filter bookings by status (booking-confirmed, booking-in-progress, booking-completed)
    responses:
      '200':
        description: Accepted bookings/history retrieved
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: object
                  properties:
                    bookings:
                      type: array
                      items:
                        $ref: './../schemas/booking.yaml#/Booking'
                message:
                  type: string
      '401':
        description: Unauthorized
      '500':
        description: Server error
/bookings/accept:
  post:
    summary: Provider accepts a booking
    tags:
      - Bookings
    security:
      - BearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - bookingId
            properties:
              bookingId:
                type: string
                description: The ObjectId of the booking to accept
    responses:
      '200':
        description: Booking accepted successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: object
                  properties:
                    booking:
                      $ref: './../schemas/booking.yaml#/Booking'
                message:
                  type: string
      '400':
        description: Invalid request or booking status
      '403':
        description: Provider not approved for this service
      '404':
        description: Booking not found
      '500':
        description: Server error
/bookings:
  post:
    summary: Create a new booking
    tags:
      - Bookings
    security:
      - BearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - serviceId
              - selectedPricingOption
              - scheduledDate
              - scheduledTime
              - paymentMethod
            properties:
              serviceId:
                type: string
              selectedPricingOption:
                type: string
                description: The ObjectId of the chosen pricing option
              scheduledDate:
                type: string
                format: date
              scheduledTime:
                type: string
                format: time
              specialInstructions:
                type: string
              location:
                $ref: './../schemas/location.yaml#/Location'
              paymentMethod:
                type: string
                enum: [cash, online]
    responses:
      '201':
        description: Booking created
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: object
                  properties:
                    booking:
                      $ref: './../schemas/booking.yaml#/Booking'
                    order:
                      type: object
                      nullable: true
                message:
                  type: string

/booking/history:
  get:
    summary: Get booking history for logged-in user
    tags:
      - Bookings
    security:
      - BearerAuth: []
    parameters:
      - in: query
        name: status
        schema:
          type: string
        required: false
        description: Filter bookings by status
    responses:
      '200':
        description: List of bookings
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: object
                  properties:
                    bookings:
                      type: array
                      items:
                        $ref: './../schemas/booking.yaml#/Booking'
                message:
                  type: string

/bookings/available:
  get:
    summary: Get available bookings for provider (location-based)
    description: >
      Returns bookings for services and locations where the provider is approved and matches the user's current location (latitude/longitude). The API uses coordinates (as query parameters) to determine pincode and matches with provider's approved service areas.
    tags:
      - Bookings
    security:
      - BearerAuth: []
    parameters:
      - in: query
        name: latitude
        required: true
        schema:
          type: number
          format: float
        description: Latitude of provider's current location
      - in: query
        name: longitude
        required: true
        schema:
          type: number
          format: float
        description: Longitude of provider's current location
    responses:
      '200':
        description: List of available bookings
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: object
                  properties:
                    bookings:
                      type: array
                      items:
                        $ref: './../schemas/booking.yaml#/Booking'
                message:
                  type: string
      '400':
        description: Missing or invalid coordinates
      '404':
        description: No pincode found for provided coordinates
      '204':
        description: No services available for your location
      '500':
        description: Server error
